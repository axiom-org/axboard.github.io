(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(t,e){},244:function(t,e,n){t.exports=n(513)},249:function(t,e,n){},250:function(t,e,n){},270:function(t,e){},307:function(t,e){},309:function(t,e){},324:function(t,e){},326:function(t,e){},334:function(t,e){},336:function(t,e){},346:function(t,e){},348:function(t,e){},356:function(t,e){},358:function(t,e){},366:function(t,e){},367:function(t,e){},369:function(t,e){},371:function(t,e){},373:function(t,e){},386:function(t,e){},391:function(t,e){},393:function(t,e){},402:function(t,e){},406:function(t,e){},407:function(t,e){},408:function(t,e){},415:function(t,e){},417:function(t,e){},422:function(t,e){},427:function(t,e){},428:function(t,e){},431:function(t,e){},437:function(t,e){},440:function(t,e){},442:function(t,e){},454:function(t,e){},456:function(t,e){},469:function(t,e){},471:function(t,e){},485:function(t,e){},487:function(t,e){},500:function(t,e){},502:function(t,e){},509:function(t,e){},513:function(t,e,n){"use strict";n.r(e);var o=n(11),a=n.n(o),c=n(236),s=n.n(c),i=(n(249),n(241)),u=n(75),r=n(237),m=n(238),f=n(242),l=n(239),p=n(243),d=(n(250),n(240)),b=n.n(d);var v=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(f.a)(this,Object(l.a)(e).call(this,t))).postdb=t.postdb,n.commentdb=t.commentdb,n.state={posts:{},comments:{}},setInterval(function(){n.postdb.load(),n.commentdb.load()},1e3),n.postdb.onMessage(function(t){if("Delete"!==t.message.type){var e=t.signer+":"+t.message.id,o=Object(u.a)({},n.state.posts);o[e]=t,n.setState({posts:o})}}),n.commentdb.onMessage(function(t){if("Delete"!==t.message.type){var e=t.signer+":"+t.message.id,o=t.message.data.parent,a=Object(u.a)({},n.state.comments[o]);a[e]=t;var c=Object(u.a)({},n.state.comments);c[o]=a,n.setState({comments:c})}}),n}return Object(p.a)(e,t),Object(m.a)(e,[{key:"sortedPosts",value:function(){var t=[];for(var e in this.state.posts)t.push(this.state.posts[e]);return t.sort(function(t,e){return e.message.timestamp.localeCompare(t.message.timestamp)}),t}},{key:"sortedComments",value:function(t){var e=[];for(var n in this.state.comments[t])e.push(this.state.comments[t][n]);return e.sort(function(t,e){return t.message.timestamp.localeCompare(e.message.timestamp)}),e}},{key:"render",value:function(){var t=this;return a.a.createElement("div",null,a.a.createElement("h1",null,"P2P Message Board Proof Of Concept"),a.a.createElement(h,{name:"New post",onSubmit:function(e){var n={content:e};t.postdb.create(n)}}),this.sortedPosts().map(function(e,n){return a.a.createElement(g,{key:n,post:e,comments:t.sortedComments(e.signer+":"+e.message.id),commentdb:t.commentdb})}))}}]),e}(a.a.Component);function g(t){return a.a.createElement("div",null,a.a.createElement("hr",null),a.a.createElement("p",null,"Post: ",t.post.message.data.content),t.comments.map(function(t,e){return a.a.createElement("p",{key:e},"Comment: ",t.message.data.content)}),a.a.createElement(h,{name:"Reply",onSubmit:function(e){var n={parent:t.post.signer+":"+t.post.message.id,content:e};t.commentdb.create(n)}}))}function h(t){var e=Object(o.useState)(""),n=Object(i.a)(e,2),c=n[0],s=n[1];return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("submitting ".concat(c)),t.onSubmit(c),s("")}},a.a.createElement("label",null,t.name,":",a.a.createElement("br",null),a.a.createElement("input",{type:"text",value:c,onChange:function(t){return s(t.target.value)}})),a.a.createElement("input",{type:"submit",value:"Submit"}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(function(){var t=new b.a({network:"alpha",verbose:!0}).createNode().channel("Axboard"),e=t.database("Posts"),n=t.database("Comments");return a.a.createElement("div",{className:"App"},a.a.createElement(v,{postdb:e,commentdb:n}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[244,1,2]]]);
//# sourceMappingURL=main.e7bce45d.chunk.js.map